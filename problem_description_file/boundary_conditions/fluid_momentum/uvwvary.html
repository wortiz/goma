<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UVWVARY &mdash; Goma User Manual 6.1.0 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> Goma User Manual
            <img src="../../../_static/goma.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                6.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../background.html">Background Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../code_structure_and_io.html">Code Structure and I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../problem_description_file.html">Problem Description (Input File)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../material_files.html">Material Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation_lists.html">Appendix 1: Goma Documentation Lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../library_mode.html">Appendix 2: Using Goma in Library Mode</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Goma User Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><strong>UVWVARY</strong></li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/problem_description_file/boundary_conditions/fluid_momentum/uvwvary.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="uvwvary">
<h1><strong>UVWVARY</strong><a class="headerlink" href="#uvwvary" title="Permalink to this headline"></a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BC</span> <span class="o">=</span> <span class="p">{</span><span class="n">UVARY</span> <span class="o">|</span> <span class="n">VVARY</span> <span class="o">|</span> <span class="n">WVARY</span><span class="p">}</span> <span class="n">SS</span> <span class="o">&lt;</span><span class="n">bc_id</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">float_list</span><span class="p">]</span>
</pre></div>
</div>
<section id="description-usage">
<h2><strong>Description / Usage</strong><a class="headerlink" href="#description-usage" title="Permalink to this headline"></a></h2>
<p><strong>(PCC/MOMENTUM)</strong></p>
<p>The <em>UVARY, VVARY</em> and <em>WVARY</em> boundary condition format is used to set variation in
X, Y, or Z velocity component, respectively, with respect to coordinates and time on a
specified sideset. Each such specification is made on a separate input card.</p>
<p>The <em>UVARY, VVARY</em>, and <em>WVARY</em> cards each require user-defined functions be supplied
in the file user_bc.c. Four separate C functions must be defined for a boundary
condition: velo_vary_fnc, dvelo_vary_fnc_d1, dvelo_vary_fnc_d2,
and dvelo_vary_fnc_d3. The first function returns the velocity component at a
specified coordinate and time value, the second, third, and fourth functions return the
derivative of the velocity component with x, y and z respectively.</p>
<p>A description of the syntax of this card follows:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%" />
<col style="width: 69%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>{UVARY | VVARY | WVARY}</strong></p></td>
<td><p>Five-character boundary condition name (&lt;bc_name&gt;)
identifies the velocity component:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>UVARY</strong> -X velocity component</p></li>
<li><p><strong>VVARY</strong> -Y velocity component</p></li>
<li><p><strong>WVARY</strong> -Z velocity component</p></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><p><strong>SS</strong></p></td>
<td><p>Type of boundary condition (&lt;bc_type&gt;), where <strong>SS</strong>
denotes side set in the EXODUS II database.</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;bc_id&gt;</p></td>
<td><p>The boundary flag identifier, an integer associated with
&lt;bc_type&gt; that identifies the boundary location (side set
in EXODUS II) in the problem domain.</p></td>
</tr>
<tr class="row-even"><td><p>[float_list]</p></td>
<td><p>An optional list of float values separated by spaces
which will be passed to the user-defined subroutines to
allow the user to vary the parameters of the boundary
condition. This list of float values is passed as a
onedimensional double array designated p in the parameter
list of all four C functions.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="examples">
<h2><strong>Examples</strong><a class="headerlink" href="#examples" title="Permalink to this headline"></a></h2>
<p>Following is a sample card for an X component</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BC</span> <span class="o">=</span> <span class="n">UVARY</span> <span class="n">SS</span> <span class="mi">10</span> <span class="mf">2.0</span> <span class="mf">4.0</span>
</pre></div>
</div>
<p>Following are the C functions that would have to be implemented in “user_bc.c” to
apply the preceding boundary condition card to set a parabolic velocity profile along a
sideset.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">double</span> <span class="n">velo_vary_fnc</span><span class="p">(</span> <span class="n">const</span> <span class="nb">int</span> <span class="n">velo_condition</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">x</span><span class="p">,</span>
  <span class="n">const</span> <span class="n">double</span> <span class="n">y</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">z</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">p</span><span class="p">[],</span> <span class="n">const</span> <span class="n">double</span>
  <span class="n">time</span> <span class="p">)</span>
<span class="p">{</span>
<span class="n">double</span> <span class="n">f</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">double</span> <span class="n">height</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="n">double</span> <span class="n">max_speed</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span> <span class="n">velo_condition</span> <span class="o">==</span> <span class="n">UVARY</span> <span class="p">)</span> <span class="p">{</span>
  <span class="n">f</span> <span class="o">=</span> <span class="n">max_speed</span><span class="o">*</span><span class="p">(</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="nb">pow</span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">height</span><span class="p">,</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="k">return</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>
<span class="o">/*</span> <span class="o">*/</span>
<span class="n">double</span> <span class="n">dvelo_vary_fnc_d1</span><span class="p">(</span> <span class="n">const</span> <span class="nb">int</span> <span class="n">velo_condition</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span>
  <span class="n">x</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">y</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">z</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">p</span><span class="p">[],</span> <span class="n">const</span>
  <span class="n">double</span> <span class="n">time</span> <span class="p">)</span>
<span class="p">{</span>
<span class="n">double</span> <span class="n">f</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">return</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>
<span class="o">/*</span> <span class="o">*/</span>
<span class="n">double</span> <span class="n">dvelo_vary_fnc_d2</span><span class="p">(</span> <span class="n">const</span> <span class="nb">int</span> <span class="n">velo_condition</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span>
  <span class="n">x</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">y</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">z</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">p</span><span class="p">[],</span> <span class="n">const</span>
  <span class="n">double</span> <span class="n">time</span> <span class="p">)</span>
<span class="p">{</span>
<span class="n">double</span> <span class="n">f</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">double</span> <span class="n">height</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="n">double</span> <span class="n">max_speed</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span> <span class="n">velo_condition</span> <span class="o">==</span> <span class="n">UVARY</span> <span class="p">)</span> <span class="p">{</span>
  <span class="n">f</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.0</span><span class="o">*</span><span class="n">max_speed</span><span class="o">*</span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">height</span><span class="p">)</span><span class="o">/</span><span class="n">height</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">return</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>
<span class="o">/*</span> <span class="o">*/</span>
<span class="n">double</span> <span class="n">dvelo_vary_fnc_d3</span><span class="p">(</span> <span class="n">const</span> <span class="nb">int</span> <span class="n">velo_condition</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span>
  <span class="n">x</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">y</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">z</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">p</span><span class="p">[],</span> <span class="n">const</span>
  <span class="n">double</span> <span class="n">time</span> <span class="p">)</span>
<span class="p">{</span>
<span class="n">double</span> <span class="n">f</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">return</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>
<span class="o">/*</span> <span class="o">*/</span>
</pre></div>
</div>
</section>
<section id="technical-discussion">
<h2><strong>Technical Discussion</strong><a class="headerlink" href="#technical-discussion" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Including the sensitivities is a pain, but required since <em>Goma</em> has no provision for
computing Jacobian entries numerically.</p></li>
<li><p>Note that the type of boundary condition (<em>UVARY, VVARY</em>, or <em>WVARY</em>) is sent to
each function in the velo_condition parameter. Since there can be only one
set of definition functions in user_bc.c, this allows the user to overload these
functions to allow for more than one component defined in this manner. It would
also be possible to use these functions to make multiple definitions of the same
velocity component on different sidesets. However, this would have to be done by
sending an identifier through the p array.</p></li>
<li><p>This is a collocated-type boundary condition. It is applied exactly at nodal
locations but has lower precedence of application than direct Dirichlet conditions.</p></li>
</ul>
</section>
<section id="references">
<h2><strong>References</strong><a class="headerlink" href="#references" title="Permalink to this headline"></a></h2>
<p>No References.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019 Goma Developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>